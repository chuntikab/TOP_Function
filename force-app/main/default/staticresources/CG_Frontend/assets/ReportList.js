var De=Object.defineProperty,Me=Object.defineProperties;var Ie=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var ke=(n,e,t)=>e in n?De(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,we=(n,e)=>{for(var t in e||(e={}))Pe.call(e,t)&&ke(n,t,e[t]);if(ge)for(var t of ge(e))Te.call(e,t)&&ke(n,t,e[t]);return n},he=(n,e)=>Me(n,Ie(e));import{S as ze,i as Ae,s as je,C as Ce,e as p,b as C,c as A,g as d,h as M,j as c,m as j,D as Ee,t as x,a as S,n as I,d as E,w as Ge,ae as Le,R as te,K as xe,o as Oe,B as le,y as O,P as qe,f as K,E as Be,k as U,q as Re,r as ye,U as Fe,H as He}from"./Layout.js";import{A as X}from"./AvatarIcon.js";import{C as Se,T as Ke}from"./Table.js";import{A as Ue}from"./AdminActionTemplate.js";import{r as Ne}from"./App.js";import{M as Je,R as Qe}from"./ReportDetailModal.js";function Ve(n){return{c:O,m:O,p:O,i:O,o:O,d:O}}function We(n){var oe,ce,ue,fe,me;let e,t,l,f=((oe=n[3])==null?void 0:oe.totalReport)+"",i,_,r,b,o,u,v,R,s,w,g,N=((ue=(ce=n[3])==null?void 0:ce.newEmployee)!=null?ue:0)+"",G,B,q,J,P,T,a,h,ne,Q,V=((me=(fe=n[3])==null?void 0:fe.annual)!=null?me:0)+"",Y,re,W,ae,F,$,D,Z,H,L;s=new X({props:{size:27,icon:"ic-new-employee",bgColor:"bg-report-employee"}}),h=new X({props:{size:27,icon:"ic-annual",bgColor:"bg-report-annual"}});const se=[Ye,Xe],z=[];function ie(m,y){return m[1]===te.ManualDetail?0:1}$=ie(n),D=z[$]=se[$](n);let k=n[3]&&$e(n);return{c(){e=p("div"),t=p("div"),l=p("div"),i=K(f),_=C(),r=p("div"),r.textContent="Total Report",b=C(),o=p("div"),u=p("div"),v=p("div"),R=p("div"),A(s.$$.fragment),w=C(),g=p("div"),G=K(N),B=C(),q=p("div"),q.textContent="New Employee",J=C(),P=p("div"),T=p("div"),a=p("div"),A(h.$$.fragment),ne=C(),Q=p("div"),Y=K(V),re=C(),W=p("div"),W.textContent="Annual",ae=C(),F=p("div"),D.c(),Z=C(),k&&k.c(),H=Be(),d(l,"class","text-size-xlarge tablet:mb-1.5"),d(r,"class","text-center text-gray-700"),d(t,"class","text-center font-weight-bold mb-2 tablet:mb-0 tablet:mr-7"),d(R,"class","text-black mr-2"),d(g,"class","text-size-large"),d(v,"class","flex justify-center items-center mb-0.5"),d(q,"class","text-center text-gray-700"),d(u,"class","_sum-data svelte-11nft8x"),d(a,"class","text-black mr-2"),d(Q,"class","text-size-large"),d(T,"class","flex justify-center items-center mb-0.5"),d(W,"class","text-center text-gray-700"),d(P,"class","_sum-data svelte-11nft8x"),d(F,"class","_sum-data svelte-11nft8x"),d(o,"class","flex mx-auto tablet:mx-0 _sum-data-wrapper svelte-11nft8x"),d(e,"class","tablet:flex tablet:justify-center mb-4")},m(m,y){M(m,e,y),c(e,t),c(t,l),c(l,i),c(t,_),c(t,r),c(e,b),c(e,o),c(o,u),c(u,v),c(v,R),j(s,R,null),c(v,w),c(v,g),c(g,G),c(u,B),c(u,q),c(o,J),c(o,P),c(P,T),c(T,a),j(h,a,null),c(T,ne),c(T,Q),c(Q,Y),c(P,re),c(P,W),c(o,ae),c(o,F),z[$].m(F,null),M(m,Z,y),k&&k.m(m,y),M(m,H,y),L=!0},p(m,y){var pe,de,_e,ve,be;(!L||y&8)&&f!==(f=((pe=m[3])==null?void 0:pe.totalReport)+"")&&U(i,f),(!L||y&8)&&N!==(N=((_e=(de=m[3])==null?void 0:de.newEmployee)!=null?_e:0)+"")&&U(G,N),(!L||y&8)&&V!==(V=((be=(ve=m[3])==null?void 0:ve.annual)!=null?be:0)+"")&&U(Y,V);let ee=$;$=ie(m),$===ee?z[$].p(m,y):(Re(),S(z[ee],1,1,()=>{z[ee]=null}),ye(),D=z[$],D?D.p(m,y):(D=z[$]=se[$](m),D.c()),x(D,1),D.m(F,null)),m[3]?k?(k.p(m,y),y&8&&x(k,1)):(k=$e(m),k.c(),x(k,1),k.m(H.parentNode,H)):k&&(Re(),S(k,1,1,()=>{k=null}),ye())},i(m){L||(x(s.$$.fragment,m),x(h.$$.fragment,m),x(D),x(k),L=!0)},o(m){S(s.$$.fragment,m),S(h.$$.fragment,m),S(D),S(k),L=!1},d(m){m&&I(e),E(s),E(h),z[$].d(),m&&I(Z),k&&k.d(m),m&&I(H)}}}function Xe(n){var v,R;let e,t,l,f,i,_=((R=(v=n[3])==null?void 0:v.incident)!=null?R:0)+"",r,b,o,u;return l=new X({props:{size:27,icon:"ic-incident",bgColor:"bg-report-incident"}}),{c(){e=p("div"),t=p("div"),A(l.$$.fragment),f=C(),i=p("div"),r=K(_),b=C(),o=p("div"),o.textContent="Incident",d(t,"class","text-black mr-2"),d(i,"class","text-size-large"),d(e,"class","flex justify-center items-center mb-0.5"),d(o,"class","text-center text-gray-700")},m(s,w){M(s,e,w),c(e,t),j(l,t,null),c(e,f),c(e,i),c(i,r),M(s,b,w),M(s,o,w),u=!0},p(s,w){var g,N;(!u||w&8)&&_!==(_=((N=(g=s[3])==null?void 0:g.incident)!=null?N:0)+"")&&U(r,_)},i(s){u||(x(l.$$.fragment,s),u=!0)},o(s){S(l.$$.fragment,s),u=!1},d(s){s&&I(e),E(l),s&&I(b),s&&I(o)}}}function Ye(n){var v,R;let e,t,l,f,i,_=((R=(v=n[3])==null?void 0:v.newCGManual)!=null?R:0)+"",r,b,o,u;return l=new X({props:{size:27,icon:"ic-new-cg",bgColor:"bg-report-manual"}}),{c(){e=p("div"),t=p("div"),A(l.$$.fragment),f=C(),i=p("div"),r=K(_),b=C(),o=p("div"),o.textContent="New CG Manual",d(t,"class","text-black mr-2"),d(i,"class","text-size-large"),d(e,"class","flex justify-center items-center mb-0.5"),d(o,"class","text-center text-gray-700")},m(s,w){M(s,e,w),c(e,t),j(l,t,null),c(e,f),c(e,i),c(i,r),M(s,b,w),M(s,o,w),u=!0},p(s,w){var g,N;(!u||w&8)&&_!==(_=((N=(g=s[3])==null?void 0:g.newCGManual)!=null?N:0)+"")&&U(r,_)},i(s){u||(x(l.$$.fragment,s),u=!0)},o(s){S(l.$$.fragment,s),u=!1},d(s){s&&I(e),E(l),s&&I(b),s&&I(o)}}}function $e(n){let e,t,l,f;function i(r){n[13](r)}let _={tableConfig:n[8]};return n[5]!==void 0&&(_.pageParam=n[5]),t=new Ke({props:_}),n[12](t),le.push(()=>Fe(t,"pageParam",i)),{c(){e=p("div"),A(t.$$.fragment),d(e,"class","text-black")},m(r,b){M(r,e,b),j(t,e,null),f=!0},p(r,b){const o={};!l&&b&32&&(l=!0,o.pageParam=r[5],qe(()=>l=!1)),t.$set(o)},i(r){f||(x(t.$$.fragment,r),f=!0)},o(r){S(t.$$.fragment,r),f=!1},d(r){r&&I(e),n[12](null),E(t)}}}function Ze(n){let e,t;return e=new He({props:{isShow:!0,isbgTransparent:!0}}),{c(){A(e.$$.fragment)},m(l,f){j(e,l,f),t=!0},p:O,i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function et(n){let e,t;return e=new Qe({props:{item:n[6],modal:n[7],service:n[0].reportDetail}}),{c(){A(e.$$.fragment)},m(l,f){j(e,l,f),t=!0},p(l,f){const i={};f&64&&(i.item=l[6]),f&128&&(i.modal=l[7]),f&1&&(i.service=l[0].reportDetail),e.$set(i)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){E(e,l)}}}function tt(n){let e,t,l,f,i,_,r={ctx:n,current:null,token:null,hasCatch:!1,pending:Ze,then:We,catch:Ve,blocks:[,,,]};Ce(t=n[2],r);let b={$$slots:{default:[et]},$$scope:{ctx:n}};return i=new Je({props:b}),n[14](i),{c(){e=p("div"),r.block.c(),l=C(),f=p("div"),A(i.$$.fragment),d(f,"class","text-black"),d(e,"class","relative _container svelte-11nft8x")},m(o,u){M(o,e,u),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=l,c(e,l),c(e,f),j(i,f,null),_=!0},p(o,[u]){n=o,r.ctx=n,u&4&&t!==(t=n[2])&&Ce(t,r)||Ee(r,n,u);const v={};u&1048769&&(v.$$scope={dirty:u,ctx:n}),i.$set(v)},i(o){_||(x(r.block),x(i.$$.fragment,o),_=!0)},o(o){for(let u=0;u<3;u+=1){const v=r.blocks[u];S(v)}S(i.$$.fragment,o),_=!1},d(o){o&&I(e),r.block.d(),r.token=null,r=null,n[14](null),E(i)}}}function lt(n,e,t){let{filter:l}=e,{isSearching:f=!1}=e,{services:i}=e,{reportRoute:_}=e,r,b,o,u,v,R,s;function w(a){t(6,R=a),s.open()}let g=[{name:"Report Number",prop:"reportNumber",cellTemplate:Se.Link,onClick:(a,h)=>{Ge(_,{reportId:h.id,parent:Le.currentMenu})}},{name:"Type of Report",prop:"reportType",render:a=>a.value==="Manual"?"New CG Manual":a.value}];_===te.COIReportDetail&&g.push({name:"COI Answer",prop:"disclosureReport",render:a=>a.value}),g.push({name:"Name",prop:"owner",sortBy:"ownerName",render:a=>a.fullName}),_===te.COIReportDetail?g.push({name:"Status",prop:"status",cellClasses:"cursor-pointer",render:Ne,onClick:(a,h)=>{w(h)}}):g.push({name:"Status",prop:"status",render:Ne}),g.push({name:"Submitted Date",prop:"submittedDate",cellTemplate:Se.Date}),g.push({name:"Function",prop:"position",sortable:!1},{name:"Action",prop:"_action",Component:Ue,actions:{onResend:a=>i.resend({reportId:a.id}).then(h=>{xe.success("Resend Successfully")}),onCancel:a=>i.cancel({reportId:a.id}).then(h=>{xe.success("Cancel Successfully"),G().finally(()=>{u.reload()})})}});const N={columns:g,getData(a,h){return Promise.all([o,i.list(he(we({},B()),{sortByParam:h,pageParam:a})).finally(()=>{t(9,f=!1)})])}};Oe(()=>{G()});function G(){return t(2,r=i.count(B()).then(a=>{t(3,b=a),o=b.totalReport})),r}function B(){var a;return{ownerId:l.ownerId.trim(),ownerName:l.ownerName.trim(),companyId:((a=l.company)==null?void 0:a.id)||"all",function:l.function||"all",department:l.department||"all",section:l.section||"all",unit:l.unit||"all"}}function q(){t(9,f=!0),G().finally(()=>{t(5,v.pageNo=1,v)})}function J(a){le[a?"unshift":"push"](()=>{u=a,t(4,u)})}function P(a){v=a,t(5,v)}function T(a){le[a?"unshift":"push"](()=>{s=a,t(7,s)})}return n.$$set=a=>{"filter"in a&&t(10,l=a.filter),"isSearching"in a&&t(9,f=a.isSearching),"services"in a&&t(0,i=a.services),"reportRoute"in a&&t(1,_=a.reportRoute)},[i,_,r,b,u,v,R,s,N,f,l,q,J,P,T]}class ut extends ze{constructor(e){super(),Ae(this,e,lt,tt,je,{filter:10,isSearching:9,services:0,reportRoute:1,search:11})}get search(){return this.$$.ctx[11]}}export{ut as R};
