import{S as oe,i as se,s as re,Z as Se,_ as qe,$ as De,t as S,a as T,e as m,b,g as v,J as ce,h as w,j as a,l as x,N as je,q as Re,r as We,n as y,O as Ie,a0 as ze,f as W,E as V,k as j,p as ue,a1 as pe,u as Ne,y as D,C as me,D as Me,o as Te,F as $e,K as Ae,c as ee,z as _e,A as de,m as te,d as le,H as Oe}from"./Layout.js";import{T as Pe}from"./Table.js";import{f as U}from"./Button.js";import{W as Ee}from"./Workflow.js";function ve(s){let e;const l=s[4].default,t=ze(l,s,s[3],null);return{c(){t&&t.c()},m(o,r){t&&t.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||r&8)&&Se(t,l,o,o[3],e?De(l,o[3],r,null):qe(o[3]),null)},i(o){e||(S(t,o),e=!0)},o(o){T(t,o),e=!1},d(o){t&&t.d(o)}}}function Fe(s){let e,l,t,o,r,n,c,i=s[1]&&ve(s);return{c(){e=m("div"),l=m("div"),t=m("button"),t.textContent="\u2715",o=b(),i&&i.c(),v(t,"class","absolute right-6 top-6 text-size-3xlarge leading-7"),v(l,"class","modal-box relative cursor-default px-2 py-6 tablet:px-6 _modal-box svelte-wf1but"),v(e,"class","modal cursor-pointer"),ce(e,"modal-open",s[1])},m(u,f){w(u,e,f),a(e,l),a(l,t),a(l,o),i&&i.m(l,null),r=!0,n||(c=[x(t,"click",s[5]),x(l,"click",je(He)),x(e,"click",s[6])],n=!0)},p(u,[f]){u[1]?i?(i.p(u,f),f&2&&S(i,1)):(i=ve(u),i.c(),S(i,1),i.m(l,null)):i&&(Re(),T(i,1,1,()=>{i=null}),We()),f&2&&ce(e,"modal-open",u[1])},i(u){r||(S(i),r=!0)},o(u){T(i),r=!1},d(u){u&&y(e),i&&i.d(),n=!1,Ie(c)}}}const He=()=>{};function Ge(s,e,l){let{$$slots:t={},$$scope:o}=e,r=!1;function n(){l(1,r=!0)}function c(){l(1,r=!1)}const i=()=>c(),u=()=>c();return s.$$set=f=>{"$$scope"in f&&l(3,o=f.$$scope)},[c,r,n,o,t,i,u]}class rt extends oe{constructor(e){super(),se(this,e,Ge,Fe,re,{open:2,close:0})}get open(){return this.$$.ctx[2]}get close(){return this.$$.ctx[0]}}function be(s,e,l){const t=s.slice();return t[1]=e[l],t}function ke(s,e,l){const t=s.slice();return t[4]=e[l],t}function he(s){var J;let e,l,t=U(s[4].actionDate,!0)+"",o,r,n,c=s[4].role.value+"",i,u,f,p=s[4].approver.fullName+"",_,N,h,I=s[4].status.value+"",$,z,G,A,M=((J=s[4].comment)!=null?J:"")+"",E,F;return{c(){e=m("tr"),l=m("td"),o=W(t),r=b(),n=m("td"),i=W(c),u=b(),f=m("td"),_=W(p),N=b(),h=m("td"),$=W(I),G=b(),A=m("td"),E=W(M),F=b(),ue(l,"min-width","135px"),v(h,"class",z=pe[s[4].status.key]),ue(A,"max-width","276px")},m(g,k){w(g,e,k),a(e,l),a(l,o),a(e,r),a(e,n),a(n,i),a(e,u),a(e,f),a(f,_),a(e,N),a(e,h),a(h,$),a(e,G),a(e,A),a(A,E),a(e,F)},p(g,k){var K;k&1&&t!==(t=U(g[4].actionDate,!0)+"")&&j(o,t),k&1&&c!==(c=g[4].role.value+"")&&j(i,c),k&1&&p!==(p=g[4].approver.fullName+"")&&j(_,p),k&1&&I!==(I=g[4].status.value+"")&&j($,I),k&1&&z!==(z=pe[g[4].status.key])&&v(h,"class",z),k&1&&M!==(M=((K=g[4].comment)!=null?K:"")+"")&&j(E,M)},d(g){g&&y(e)}}}function ge(s){let e,l=s[4].isShow&&he(s);return{c(){l&&l.c(),e=V()},m(t,o){l&&l.m(t,o),w(t,e,o)},p(t,o){t[4].isShow?l?l.p(t,o):(l=he(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){l&&l.d(t),t&&y(e)}}}function we(s){let e,l,t,o=U(s[1].submittedDate,!0)+"",r,n,c,i=s[1].approvers,u=[];for(let f=0;f<i.length;f+=1)u[f]=ge(ke(s,i,f));return{c(){e=m("tr"),l=m("td"),t=W("Submitted Date : "),r=W(o),n=b();for(let f=0;f<u.length;f+=1)u[f].c();c=V(),v(l,"colspan","5"),v(l,"class","groups-row")},m(f,p){w(f,e,p),a(e,l),a(l,t),a(l,r),w(f,n,p);for(let _=0;_<u.length;_+=1)u[_].m(f,p);w(f,c,p)},p(f,p){if(p&1&&o!==(o=U(f[1].submittedDate,!0)+"")&&j(r,o),p&1){i=f[1].approvers;let _;for(_=0;_<i.length;_+=1){const N=ke(f,i,_);u[_]?u[_].p(N,p):(u[_]=ge(N),u[_].c(),u[_].m(c.parentNode,c))}for(;_<u.length;_+=1)u[_].d(1);u.length=i.length}},d(f){f&&y(e),f&&y(n),Ne(u,f),f&&y(c)}}}function Je(s){let e,l=s[0],t=[];for(let o=0;o<l.length;o+=1)t[o]=we(be(s,l,o));return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=V()},m(o,r){for(let n=0;n<t.length;n+=1)t[n].m(o,r);w(o,e,r)},p(o,[r]){if(r&1){l=o[0];let n;for(n=0;n<l.length;n+=1){const c=be(o,l,n);t[n]?t[n].p(c,r):(t[n]=we(c),t[n].c(),t[n].m(e.parentNode,e))}for(;n<t.length;n+=1)t[n].d(1);t.length=l.length}},i:D,o:D,d(o){Ne(t,o),o&&y(e)}}}function Ke(s,e,l){let{rows:t}=e;return s.$$set=o=>{"rows"in o&&l(0,t=o.rows)},[t]}class Le extends oe{constructor(e){super(),se(this,e,Ke,Je,re,{rows:0})}}function Ze(s){return{c:D,m:D,p:D,i:D,o:D,d:D}}function Be(s){let e,l,t=s[3]&&ye(s);return{c(){t&&t.c(),e=V()},m(o,r){t&&t.m(o,r),w(o,e,r),l=!0},p(o,r){o[3]?t?(t.p(o,r),r&8&&S(t,1)):(t=ye(o),t.c(),S(t,1),t.m(e.parentNode,e)):t&&(Re(),T(t,1,1,()=>{t=null}),We())},i(o){l||(S(t),l=!0)},o(o){T(t),l=!1},d(o){t&&t.d(o),o&&y(e)}}}function ye(s){let e,l,t,o,r,n,c=s[0].reportNumber+"",i,u,f,p,_,N,h,I,$,z,G,A,M=s[3].status.value+"",E,F,J,g,k,K,X,L,Z,ne,H,O;function ae(d,R){return d[1]==="coi"?Ue:Qe}let B=ae(s),P=B(s);function ie(d,R){return d[1]==="coi"?Xe:Ve}let Q=ie(s),q=Q(s);k=new Ee({props:{currentWorkflow:s[3].currentWorkflow,rejectedIndex:s[5]}});let C=s[5]!==-1&&Ce(s);return H=new Pe({props:{tableConfig:s[4]}}),{c(){e=m("div"),l=m("div"),P.c(),t=b(),o=m("div"),r=m("div"),n=W("Report No. : "),i=W(c),u=b(),q.c(),f=b(),p=m("div"),_=m("span"),_.textContent="Status :",N=b(),h=m("span"),I=m("span"),$=m("i"),G=b(),A=m("span"),E=W(M),J=b(),g=m("div"),ee(k.$$.fragment),K=b(),C&&C.c(),X=b(),L=m("div"),Z=m("div"),Z.textContent="History",ne=b(),ee(H.$$.fragment),v(l,"class","_title svelte-1q8dlm4"),v($,"class",z="ic "+_e[s[3].status.key]+" svelte-1q8dlm4"),v(I,"class","icon"),v(h,"class",F="icon-text "+de[s[3].status.key]+" svelte-1q8dlm4"),v(o,"class","flex flex-col tablet:flex-row justify-between gap-2 text-size-large font-weight-bold mb-4"),v(g,"class","mb-3 desktop:px-10"),v(Z,"class","text-size-xlarge mb-2")},m(d,R){w(d,e,R),a(e,l),P.m(l,null),a(e,t),a(e,o),a(o,r),a(r,n),a(r,i),a(o,u),q.m(o,null),a(o,f),a(o,p),a(p,_),a(p,N),a(p,h),a(h,I),a(I,$),a(h,G),a(h,A),a(A,E),a(e,J),a(e,g),te(k,g,null),a(e,K),C&&C.m(e,null),a(e,X),a(e,L),a(L,Z),a(L,ne),te(H,L,null),O=!0},p(d,R){B!==(B=ae(d))&&(P.d(1),P=B(d),P&&(P.c(),P.m(l,null))),(!O||R&1)&&c!==(c=d[0].reportNumber+"")&&j(i,c),Q===(Q=ie(d))&&q?q.p(d,R):(q.d(1),q=Q(d),q&&(q.c(),q.m(o,f))),(!O||R&8&&z!==(z="ic "+_e[d[3].status.key]+" svelte-1q8dlm4"))&&v($,"class",z),(!O||R&8)&&M!==(M=d[3].status.value+"")&&j(E,M),(!O||R&8&&F!==(F="icon-text "+de[d[3].status.key]+" svelte-1q8dlm4"))&&v(h,"class",F);const Y={};R&8&&(Y.currentWorkflow=d[3].currentWorkflow),R&32&&(Y.rejectedIndex=d[5]),k.$set(Y),d[5]!==-1?C?C.p(d,R):(C=Ce(d),C.c(),C.m(e,X)):C&&(C.d(1),C=null);const fe={};R&16&&(fe.tableConfig=d[4]),H.$set(fe)},i(d){O||(S(k.$$.fragment,d),S(H.$$.fragment,d),O=!0)},o(d){T(k.$$.fragment,d),T(H.$$.fragment,d),O=!1},d(d){d&&y(e),P.d(),q.d(),le(k),C&&C.d(),le(H)}}}function Qe(s){let e;return{c(){e=m("span"),e.textContent="\u0E23\u0E32\u0E22\u0E07\u0E32\u0E19\u0E01\u0E32\u0E23\u0E23\u0E31\u0E1A\u0E02\u0E2D\u0E07\u0E02\u0E27\u0E31\u0E0D"},m(l,t){w(l,e,t)},d(l){l&&y(e)}}}function Ue(s){let e;return{c(){e=m("span"),e.textContent="\u0E01\u0E32\u0E23\u0E23\u0E32\u0E22\u0E07\u0E32\u0E19 COI"},m(l,t){w(l,e,t)},d(l){l&&y(e)}}}function Ve(s){let e;return{c(){e=m("div")},m(l,t){w(l,e,t)},p:D,d(l){l&&y(e)}}}function Xe(s){let e,l,t=s[0].reportType.value+"",o;return{c(){e=m("div"),l=W("Type of Report : "),o=W(t)},m(r,n){w(r,e,n),a(e,l),a(e,o)},p(r,n){n&1&&t!==(t=r[0].reportType.value+"")&&j(o,t)},d(r){r&&y(e)}}}function Ce(s){let e,l,t,o,r=s[3].currentWorkflow.approvers[s[5]].comment+"",n;return{c(){e=m("div"),l=m("div"),l.textContent="Reject Reason",t=b(),o=m("div"),n=W(r),v(e,"class","_reject-reason-wrapper svelte-1q8dlm4")},m(c,i){w(c,e,i),a(e,l),a(e,t),a(e,o),a(o,n)},p(c,i){i&40&&r!==(r=c[3].currentWorkflow.approvers[c[5]].comment+"")&&j(n,r)},d(c){c&&y(e)}}}function Ye(s){let e,l;return e=new Oe({props:{isShow:!0}}),{c(){ee(e.$$.fragment)},m(t,o){te(e,t,o),l=!0},p:D,i(t){l||(S(e.$$.fragment,t),l=!0)},o(t){T(e.$$.fragment,t),l=!1},d(t){le(e,t)}}}function xe(s){let e,l,t,o={ctx:s,current:null,token:null,hasCatch:!1,pending:Ye,then:Be,catch:Ze,blocks:[,,,]};return me(l=s[2],o),{c(){e=m("div"),o.block.c(),v(e,"class","_modal-wrapper svelte-1q8dlm4")},m(r,n){w(r,e,n),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,t=!0},p(r,[n]){s=r,o.ctx=s,n&4&&l!==(l=s[2])&&me(l,o)||Me(o,s,n)},i(r){t||(S(o.block),t=!0)},o(r){for(let n=0;n<3;n+=1){const c=o.blocks[n];T(c)}t=!1},d(r){r&&y(e),o.block.d(),o.token=null,o=null}}}function et(s,e,l){let{item:t}=e,{modal:o}=e,{service:r}=e,{type:n="coi"}=e,c,i,u={isStriped:!1,showFooter:!1,columns:[{name:"Date/Time",prop:"submittedDate",sortable:!1},{name:"Position",prop:"role",sortable:!1},{name:"Name",prop:"approver",sortable:!1},{name:"Result",prop:"status",sortable:!1},{name:"Reject Reason",prop:"comment",sortable:!1}],getData:()=>new Promise(p=>{var _;p([1,(_=i.historyWorkflows)!=null?_:[]])})},f=-1;return Te(()=>{typeof r=="function"?l(2,c=r({reportId:t.id}).then(p=>{var _,N;p?(l(3,i=p),(N=(_=i.currentWorkflow)==null?void 0:_.approvers)!=null&&N.length&&l(5,f=i.currentWorkflow.approvers.findIndex(h=>h.status.key===$e.ApproverStatus.Rejected)),i.historyWorkflows&&l(4,u.customRows=i.historyWorkflows&&i.historyWorkflows.length?Le:void 0,u)):(Ae.error(`Not found Report ${t.reportNumber}`),o.close())})):o.close()}),s.$$set=p=>{"item"in p&&l(0,t=p.item),"modal"in p&&l(6,o=p.modal),"service"in p&&l(7,r=p.service),"type"in p&&l(1,n=p.type)},[t,n,c,i,u,f,o,r]}class nt extends oe{constructor(e){super(),se(this,e,et,xe,re,{item:0,modal:6,service:7,type:1})}}export{rt as M,nt as R};
