import{S as R,i as V,s as H,E as I,h as w,b as A,e as m,f as W,g,J as y,j as d,k as C,n as k,a5 as F,a1 as N,u as K,y as D,F as S}from"./Layout.js";import{f as G}from"./Button.js";function z(r,t,e){const l=r.slice();return l[6]=t[e],l[8]=e,l}function j(r){const t=r.slice(),e=t[2]!==-1&&t[8]>t[2];t[9]=e;const l=t[3]!==-1&&t[8]>t[3];return t[10]=l,t}function B(r){let t,e=r[0].approvers,l=[];for(let i=0;i<e.length;i+=1)l[i]=P(z(r,e,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=I()},m(i,o){for(let a=0;a<l.length;a+=1)l[a].m(i,o);w(i,t,o)},p(i,o){if(o&63){e=i[0].approvers;let a;for(a=0;a<e.length;a+=1){const n=z(i,e,a);l[a]?l[a].p(n,o):(l[a]=P(n),l[a].c(),l[a].m(t.parentNode,t))}for(;a<l.length;a+=1)l[a].d(1);l.length=e.length}},d(i){K(l,i),i&&k(t)}}}function E(r){let t,e,l,i=r[6].role.value+"",o,a,n,h,f,c,p=r[8]>0&&M(),_=r[1]&&L(r),v=(!r[1]||!r[9])&&q(r),u=r[1]&&!r[9]&&J(r);return{c(){p&&p.c(),t=A(),e=m("div"),l=m("div"),o=W(i),a=A(),_&&_.c(),n=A(),v&&v.c(),h=A(),u&&u.c(),f=A(),g(l,"class","text-black font-weight-bold mb-1"),g(e,"class",c="_workflow "+(r[4]?r[5][r[6].status.key]:"")+" svelte-46a1bv"),y(e,"_workflow__current",r[6].isCurrent),y(e,"_workflow__pending",r[10]),y(e,"_workflow__full_detail",r[1])},m(s,b){p&&p.m(s,b),w(s,t,b),w(s,e,b),d(e,l),d(l,o),d(e,a),_&&_.m(e,null),d(e,n),v&&v.m(e,null),d(e,h),u&&u.m(e,null),d(e,f)},p(s,b){b&1&&i!==(i=s[6].role.value+"")&&C(o,i),s[1]?_?_.p(s,b):(_=L(s),_.c(),_.m(e,n)):_&&(_.d(1),_=null),!s[1]||!s[9]?v?v.p(s,b):(v=q(s),v.c(),v.m(e,h)):v&&(v.d(1),v=null),s[1]&&!s[9]?u?u.p(s,b):(u=J(s),u.c(),u.m(e,f)):u&&(u.d(1),u=null),b&17&&c!==(c="_workflow "+(s[4]?s[5][s[6].status.key]:"")+" svelte-46a1bv")&&g(e,"class",c),b&17&&y(e,"_workflow__current",s[6].isCurrent),b&25&&y(e,"_workflow__pending",s[10]),b&19&&y(e,"_workflow__full_detail",s[1])},d(s){p&&p.d(s),s&&k(t),s&&k(e),_&&_.d(),v&&v.d(),u&&u.d()}}}function M(r){let t;return{c(){t=m("div"),g(t,"class","divider svelte-46a1bv")},m(e,l){w(e,t,l)},d(e){e&&k(t)}}}function L(r){let t;function e(o,a){var n;return(n=o[6].approver)!=null&&n.fullName?Q:O}let l=e(r),i=l(r);return{c(){i.c(),t=I()},m(o,a){i.m(o,a),w(o,t,a)},p(o,a){l===(l=e(o))&&i?i.p(o,a):(i.d(1),i=l(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){i.d(o),o&&k(t)}}}function O(r){let t;return{c(){t=m("div"),t.textContent="\xA0"},m(e,l){w(e,t,l)},p:D,d(e){e&&k(t)}}}function Q(r){let t,e=r[6].approver.fullName+"",l;return{c(){t=m("div"),l=W(e)},m(i,o){w(i,t,o),d(t,l)},p(i,o){o&1&&e!==(e=i[6].approver.fullName+"")&&C(l,e)},d(i){i&&k(t)}}}function q(r){let t,e,l,i,o,a,n=r[6].status.value+"",h,f;return{c(){t=m("div"),e=m("div"),l=m("i"),o=A(),a=m("div"),h=W(n),g(l,"class",i="ic "+(r[10]?"ic-waiting":F[r[6].status.key])+" svelte-46a1bv"),g(e,"class","icon svelte-46a1bv"),g(t,"class",f="_icon-wrapper "+N[r[6].status.key]+" svelte-46a1bv")},m(c,p){w(c,t,p),d(t,e),d(e,l),d(t,o),d(t,a),d(a,h)},p(c,p){p&9&&i!==(i="ic "+(c[10]?"ic-waiting":F[c[6].status.key])+" svelte-46a1bv")&&g(l,"class",i),p&1&&n!==(n=c[6].status.value+"")&&C(h,n),p&1&&f!==(f="_icon-wrapper "+N[c[6].status.key]+" svelte-46a1bv")&&g(t,"class",f)},d(c){c&&k(t)}}}function J(r){let t,e=G(r[6].actionDate,!0)+"",l;return{c(){t=m("div"),l=W(e)},m(i,o){w(i,t,o),d(t,l)},p(i,o){o&1&&e!==(e=G(i[6].actionDate,!0)+"")&&C(l,e)},d(i){i&&k(t)}}}function P(r){let t,e=r[6].isShow!==!1&&E(j(r));return{c(){e&&e.c(),t=I()},m(l,i){e&&e.m(l,i),w(l,t,i)},p(l,i){l[6].isShow!==!1?e?e.p(j(l),i):(e=E(j(l)),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(l){e&&e.d(l),l&&k(t)}}}function T(r){let t,e=r[0]&&B(r);return{c(){t=m("div"),e&&e.c(),g(t,"class","flex")},m(l,i){w(l,t,i),e&&e.m(t,null)},p(l,[i]){l[0]?e?e.p(l,i):(e=B(l),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},i:D,o:D,d(l){l&&k(t),e&&e.d()}}}function U(r,t,e){let l,i,{currentWorkflow:o}=t,{isShowFullDetail:a=!0}=t,{rejectedIndex:n=-1}=t;const h={[S.ApproverStatus.WaitingForSubmit]:"border-waiting-for-submit",[S.ApproverStatus.WaitingSupervisor]:"border-waiting-supervisor",[S.ApproverStatus.WaitingGLVP]:"border-waiting-glvp",[S.ApproverStatus.WaitingGLGC]:"border-waiting-glgc",[S.ApproverStatus.Submitted]:"border-success",[S.ApproverStatus.Acknowledged]:"border-success",[S.ApproverStatus.Rejected]:"border-rejected"};return r.$$set=f=>{"currentWorkflow"in f&&e(0,o=f.currentWorkflow),"isShowFullDetail"in f&&e(1,a=f.isShowFullDetail),"rejectedIndex"in f&&e(2,n=f.rejectedIndex)},r.$$.update=()=>{r.$$.dirty&1&&e(3,l=o&&o.approvers.length?o.approvers.findIndex(f=>f.isCurrent):-1),r.$$.dirty&9&&e(4,i=l!==-1&&o.approvers[l].status.key!==S.ApproverStatus.Acknowledged)},[o,a,n,l,i,h]}class Z extends R{constructor(t){super(),V(this,t,U,T,H,{currentWorkflow:0,isShowFullDetail:1,rejectedIndex:2})}}export{Z as W};
