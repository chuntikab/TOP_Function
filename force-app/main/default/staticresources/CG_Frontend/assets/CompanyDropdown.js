var le=Object.defineProperty;var I=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var J=(t,l,e)=>l in t?le(t,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[l]=e,z=(t,l)=>{for(var e in l||(l={}))ne.call(l,e)&&J(t,e,l[e]);if(I)for(var e of I(l))ie.call(l,e)&&J(t,e,l[e]);return t};import{S as U,i as j,s as R,c as A,m as B,t as _,a as w,d as N,e as F,b as te,g as M,J as v,h as G,j as K,l as ae,q as Q,r as W,n as X,o as se,a2 as oe,a3 as P,a4 as fe,B as L,E as ue,U as Y,P as Z}from"./Layout.js";import{B as re}from"./BaseDropdown.js";import{L as ce}from"./Button.js";function q(t){let l,e;return l=new ce({props:{label:t[0]}}),{c(){A(l.$$.fragment)},m(o,s){B(l,o,s),e=!0},p(o,s){const u={};s&1&&(u.label=o[0]),l.$set(u)},i(o){e||(_(l.$$.fragment,o),e=!0)},o(o){w(l.$$.fragment,o),e=!1},d(o){N(l,o)}}}function me(t){let l,e,o,s,u,i,m,n=t[0]&&q(t);return{c(){l=F("div"),e=F("label"),n&&n.c(),o=te(),s=F("select"),s.multiple=!0,M(e,"class","label gap-1 items-start"),v(e,"flex-col",!t[1]),v(e,"cursor-pointer",!t[2]),v(e,"p-0",t[3]),M(l,"class","form-control")},m(f,b){G(f,l,b),K(l,e),n&&n.m(e,null),K(e,o),K(e,s),t[16](s),u=!0,i||(m=ae(e,"click",t[17]),i=!0)},p(f,[b]){f[0]?n?(n.p(f,b),b&1&&_(n,1)):(n=q(f),n.c(),_(n,1),n.m(e,o)):n&&(Q(),w(n,1,1,()=>{n=null}),W()),b&2&&v(e,"flex-col",!f[1]),b&4&&v(e,"cursor-pointer",!f[2]),b&8&&v(e,"p-0",f[3])},i(f){u||(_(n),u=!0)},o(f){w(n),u=!1},d(f){f&&X(l),n&&n.d(),t[16](null),i=!1,m()}}}function de(t,l,e){let{label:o=""}=l,{value:s=[]}=l,{valueKey:u="id"}=l,{labelKey:i="name"}=l,{isHorizontal:m=!1}=l,{isForm:n=!1}=l,{disabled:f=!1}=l,{isSmall:b=!1}=l,{showAll:C=!1}=l,{getOptions:S=void 0}=l,{onChange:g=void 0}=l,{choiceOptions:k=void 0}=l,{classNames:O=void 0}=l,r,h=[],c,H,y;const V=(a=s)=>y?a.map(d=>({value:d+"",label:d+""})):a.map(d=>({value:d.id+"",label:d.name+""})),E=a=>y?a+"":a.id+"";function T(){c&&(s.length?e(5,c.input.element.placeholder="",c):e(5,c.input.element.placeholder="All",c))}se(async()=>{r&&(e(5,c=new window.Choices(r,z({placeholderValue:"All",allowHTML:!1,removeItemButton:!0,searchEnabled:!0,shouldSort:!1,itemSelectText:"",classNames:z({containerOuter:`choices ${n?"choices-form":""}`},O)},k))),c.passedElement.element.addEventListener("choice",function(a){const d=a.detail.choice.value;if(y)e(6,s=[...s,d]);else{const $=h.find(ee=>E(ee)===d);e(6,s=[...s,$])}c.setChoiceByValue(d),H=s,g&&g(s),T()},!1),c.passedElement.element.addEventListener("removeItem",function(a){a.detail&&(e(6,s=[...s].filter(d=>E(d)!==a.detail.value)),setTimeout(()=>{c.removeActiveItemsByValue(a.detail.value)})),H=s,g&&g(s),T()}),D())}),oe(async()=>{if(await P(),c){if(JSON.stringify(H)!==JSON.stringify(s)){const a=V().map(d=>d.value);a.length>0?c.setChoiceByValue(a):c.removeActiveItems()}f?c.disable():c.enable()}H=s}),fe(()=>{c&&(c.destroy(),e(5,c=void 0))});async function D(){await P(),c&&(h&&h.length>0&&c.clearChoices(),c.setChoices(function(){return S().then(a=>(h&&c.clearChoices(),h=a,y=h[0]&&(typeof h[0]=="string"||typeof h[0]=="number"),C&&(y?h.unshift("All"):h.unshift({[i]:"All",[u]:"all"})),s.length&&setTimeout(()=>{c.setChoiceByValue(V().map(d=>d.value))}),setTimeout(()=>{c&&(f?c.disable():c.enable())}),y===!1?h.map(d=>({value:d[u],label:d[i]})):h.map(d=>({value:d,label:d}))))}))}function p(a){L[a?"unshift":"push"](()=>{r=a,e(4,r)})}const x=()=>{f||c.showDropdown()};return t.$$set=a=>{"label"in a&&e(0,o=a.label),"value"in a&&e(6,s=a.value),"valueKey"in a&&e(7,u=a.valueKey),"labelKey"in a&&e(8,i=a.labelKey),"isHorizontal"in a&&e(1,m=a.isHorizontal),"isForm"in a&&e(9,n=a.isForm),"disabled"in a&&e(2,f=a.disabled),"isSmall"in a&&e(3,b=a.isSmall),"showAll"in a&&e(10,C=a.showAll),"getOptions"in a&&e(11,S=a.getOptions),"onChange"in a&&e(12,g=a.onChange),"choiceOptions"in a&&e(13,k=a.choiceOptions),"classNames"in a&&e(14,O=a.classNames)},[o,m,f,b,r,c,s,u,i,n,C,S,g,k,O,D,p,x]}class be extends U{constructor(l){super(),j(this,l,de,me,R,{label:0,value:6,valueKey:7,labelKey:8,isHorizontal:1,isForm:9,disabled:2,isSmall:3,showAll:10,getOptions:11,onChange:12,choiceOptions:13,classNames:14,setChoices:15})}get setChoices(){return this.$$.ctx[15]}}function he(t){let l,e,o;function s(i){t[12](i)}let u={valueKey:"name",labelKey:"fullName",label:t[7],isHorizontal:t[1],getOptions:t[8],isForm:t[2],disabled:t[3],placeholder:t[5],onChange:t[6]};return t[0]!==void 0&&(u.value=t[0]),l=new re({props:u}),L.push(()=>Y(l,"value",s)),{c(){A(l.$$.fragment)},m(i,m){B(l,i,m),o=!0},p(i,m){const n={};m&2&&(n.isHorizontal=i[1]),m&4&&(n.isForm=i[2]),m&8&&(n.disabled=i[3]),m&32&&(n.placeholder=i[5]),m&64&&(n.onChange=i[6]),!e&&m&1&&(e=!0,n.value=i[0],Z(()=>e=!1)),l.$set(n)},i(i){o||(_(l.$$.fragment,i),o=!0)},o(i){w(l.$$.fragment,i),o=!1},d(i){N(l,i)}}}function ge(t){let l,e,o;function s(i){t[11](i)}let u={valueKey:"name",labelKey:"fullName",label:t[7],isHorizontal:t[1],getOptions:t[8],isForm:t[2],disabled:t[3]};return t[0]!==void 0&&(u.value=t[0]),l=new be({props:u}),L.push(()=>Y(l,"value",s)),{c(){A(l.$$.fragment)},m(i,m){B(l,i,m),o=!0},p(i,m){const n={};m&2&&(n.isHorizontal=i[1]),m&4&&(n.isForm=i[2]),m&8&&(n.disabled=i[3]),!e&&m&1&&(e=!0,n.value=i[0],Z(()=>e=!1)),l.$set(n)},i(i){o||(_(l.$$.fragment,i),o=!0)},o(i){w(l.$$.fragment,i),o=!1},d(i){N(l,i)}}}function _e(t){let l,e,o,s;const u=[ge,he],i=[];function m(n,f){return n[4]?0:1}return l=m(t),e=i[l]=u[l](t),{c(){e.c(),o=ue()},m(n,f){i[l].m(n,f),G(n,o,f),s=!0},p(n,[f]){let b=l;l=m(n),l===b?i[l].p(n,f):(Q(),w(i[b],1,1,()=>{i[b]=null}),W(),e=i[l],e?e.p(n,f):(e=i[l]=u[l](n),e.c()),_(e,1),e.m(o.parentNode,o))},i(n){s||(_(e),s=!0)},o(n){w(e),s=!1},d(n){i[l].d(n),n&&X(o)}}}function we(t,l,e){let{isShowSingleLabel:o=!0}=l,{isHorizontal:s=!1}=l,{value:u=void 0}=l,{isForm:i=!1}=l,{disabled:m=!1}=l,{multiple:n=!1}=l,{service:f}=l,{placeholder:b=void 0}=l,{onChange:C=void 0}=l;const S=o?"Company":{th:"\u0E23\u0E30\u0E1A\u0E38\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17",en:"Company"};function g(){return f()}function k(r){u=r,e(0,u)}function O(r){u=r,e(0,u)}return t.$$set=r=>{"isShowSingleLabel"in r&&e(9,o=r.isShowSingleLabel),"isHorizontal"in r&&e(1,s=r.isHorizontal),"value"in r&&e(0,u=r.value),"isForm"in r&&e(2,i=r.isForm),"disabled"in r&&e(3,m=r.disabled),"multiple"in r&&e(4,n=r.multiple),"service"in r&&e(10,f=r.service),"placeholder"in r&&e(5,b=r.placeholder),"onChange"in r&&e(6,C=r.onChange)},[u,s,i,m,n,b,C,S,g,o,f,k,O]}class ke extends U{constructor(l){super(),j(this,l,we,_e,R,{isShowSingleLabel:9,isHorizontal:1,value:0,isForm:2,disabled:3,multiple:4,service:10,placeholder:5,onChange:6})}}export{be as B,ke as C};
