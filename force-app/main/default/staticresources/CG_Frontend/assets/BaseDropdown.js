var Y=Object.defineProperty;var q=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var M=(s,t,l)=>t in s?Y(s,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[t]=l,B=(s,t)=>{for(var l in t||(t={}))Z.call(t,l)&&M(s,l,t[l]);if(q)for(var l of q(t))v.call(t,l)&&M(s,l,t[l]);return s};import{S as x,i as p,s as $,c as ee,m as le,t as A,a as H,d as te,e as I,b as ne,g as j,J as w,p as R,h as ie,j as V,l as se,q as ae,r as fe,n as oe,o as ce,a2 as ue,a3 as U,a4 as me,B as de}from"./Layout.js";import{L as re}from"./Button.js";function G(s){let t,l;return t=new re({props:{label:s[0]}}),{c(){ee(t.$$.fragment)},m(m,n){le(t,m,n),l=!0},p(m,n){const a={};n&1&&(a.label=m[0]),t.$set(a)},i(m){l||(A(t.$$.fragment,m),l=!0)},o(m){H(t.$$.fragment,m),l=!1},d(m){te(t,m)}}}function he(s){let t,l,m,n,a,h,b,f=s[0]&&G(s);return{c(){t=I("div"),l=I("label"),f&&f.c(),m=ne(),n=I("select"),n.multiple=s[2],j(l,"class","label gap-1 items-start"),w(l,"flex-col",!s[1]),w(l,"cursor-pointer",!s[3]),w(l,"p-0",s[4]),j(t,"class","form-control"),R(t,"width",s[5]+"px",!1)},m(c,d){ie(c,t,d),V(t,l),f&&f.m(l,null),V(l,m),V(l,n),s[20](n),a=!0,h||(b=se(l,"click",s[21]),h=!0)},p(c,[d]){c[0]?f?(f.p(c,d),d&1&&A(f,1)):(f=G(c),f.c(),A(f,1),f.m(l,m)):f&&(ae(),H(f,1,1,()=>{f=null}),fe()),(!a||d&4)&&(n.multiple=c[2]),d&2&&w(l,"flex-col",!c[1]),d&8&&w(l,"cursor-pointer",!c[3]),d&16&&w(l,"p-0",c[4]),d&32&&R(t,"width",c[5]+"px",!1)},i(c){a||(A(f),a=!0)},o(c){H(f),a=!1},d(c){c&&oe(t),f&&f.d(),s[20](null),h=!1,b()}}}function be(s,t,l){let{label:m=""}=t,{value:n=void 0}=t,{valueKey:a="id"}=t,{labelKey:h="name"}=t,{placeholder:b=void 0}=t,{isHorizontal:f=!1}=t,{multiple:c=!1}=t,{isForm:d=!1}=t,{disabled:S=!1}=t,{isSmall:T=!1}=t,{showAll:E=!1}=t,{width:z=void 0}=t,{getOptions:C=void 0}=t,{onChange:g=void 0}=t,{choiceOptions:K=void 0}=t,{classNames:k=void 0}=t,{options:u=[]}=t,y,i,_,O;function N(e,o=!0){return O===!1?u.find(r=>r[a]===(e==null?void 0:e[o?a:"value"])):u.find(r=>r===e)}function D(e){O=e&&(typeof e=="string"||typeof e=="number")}function F(){E&&(O?u.unshift("All"):u.unshift({[h]:"All",[a]:"all"}))}function J(e){i.setChoiceByValue(e)}function L(){S?i.disable():i.enable()}function Q(){if(i&&!n){const e=document.createElement("div"),o=document.createTextNode("All");e.appendChild(o),e.className="choices__placeholder",i.itemList.element.appendChild(e)}}ce(async()=>{if(y){_=n;let e=!1;l(7,i=new window.Choices(y,B({placeholderValue:b,allowHTML:!1,removeItemButton:!0,searchEnabled:!0,shouldSort:!1,itemSelectText:"",classNames:B({containerOuter:`choices ${d?"choices-form":""}`},k)},K))),i.passedElement.element.addEventListener("removeItem",function(o){e=!1}),i.passedElement.element.addEventListener("addItem",function(o){e=!0;const r=N(o.detail,!1);r?l(8,n=r):l(8,n=o.detail.value),_!==n&&(_=n,g&&g(n))}),i.passedElement.element.addEventListener("change",function(o){e===!1&&(l(8,n=void 0),_=n,g&&g(n)),Q()}),P()}}),ue(async()=>{if(await U(),i){if(JSON.stringify(_)!==JSON.stringify(n)){const e=N(n);e?(l(8,n=e),i.setChoiceByValue(e[a]?e[a]:e)):i.removeActiveItems()}L()}_=n}),me(()=>{i&&(i.destroy(),l(7,i=void 0))});async function P(){await U(),i&&(C&&typeof C=="function"?(u&&u.length>0&&i.clearChoices(),i.setChoices(function(){return C().then(e=>{u&&i.clearChoices(),l(9,u=e),D(u[0]),F();const o=N(n);return setTimeout(()=>{i&&(o&&J(o[a]?o[a]:o),L())}),O?u.map(r=>({value:r,label:r})):u.map(r=>({value:r[a],label:r[h]}))})})):u&&i.setChoices(function(){D(u[0]),F();const e=N(n);return setTimeout(()=>{i&&(e&&J(e[a]?e[a]:e),L())}),O?u.map(o=>({value:o,label:o})):u.map(o=>({value:o[a],label:o[h]}))}))}function W(e){de[e?"unshift":"push"](()=>{y=e,l(6,y)})}const X=()=>{S||i.showDropdown()};return s.$$set=e=>{"label"in e&&l(0,m=e.label),"value"in e&&l(8,n=e.value),"valueKey"in e&&l(10,a=e.valueKey),"labelKey"in e&&l(11,h=e.labelKey),"placeholder"in e&&l(12,b=e.placeholder),"isHorizontal"in e&&l(1,f=e.isHorizontal),"multiple"in e&&l(2,c=e.multiple),"isForm"in e&&l(13,d=e.isForm),"disabled"in e&&l(3,S=e.disabled),"isSmall"in e&&l(4,T=e.isSmall),"showAll"in e&&l(14,E=e.showAll),"width"in e&&l(5,z=e.width),"getOptions"in e&&l(15,C=e.getOptions),"onChange"in e&&l(16,g=e.onChange),"choiceOptions"in e&&l(17,K=e.choiceOptions),"classNames"in e&&l(18,k=e.classNames),"options"in e&&l(9,u=e.options)},[m,f,c,S,T,z,y,i,n,u,a,h,b,d,E,C,g,K,k,P,W,X]}class Ce extends x{constructor(t){super(),p(this,t,be,he,$,{label:0,value:8,valueKey:10,labelKey:11,placeholder:12,isHorizontal:1,multiple:2,isForm:13,disabled:3,isSmall:4,showAll:14,width:5,getOptions:15,onChange:16,choiceOptions:17,classNames:18,options:9,setChoices:19})}get setChoices(){return this.$$.ctx[19]}}export{Ce as B};
